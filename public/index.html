<!DOCTYPE html>
<html lang="id" class="h-full">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no" />
  <meta name="theme-color" content="#0F172A" />
  <title>KARTEJI - App Karang Taruna</title>

  <link rel="apple-touch-icon" sizes="180x180" href="assets/icon-ios-180.png" />
  <link rel="manifest" href="manifest.json" />

  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@24..48,400,1,0" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700;800&display=swap" rel="stylesheet">

  <script>
    tailwind.config = {
      darkMode: ['class', '[data-theme="dark"]'],
      theme: {
        extend: {
          fontFamily: { sans: ['Plus Jakarta Sans', 'system-ui', 'Segoe UI', 'Roboto', 'sans-serif'] },
          colors: {
            brand: {
              dark: '#0B1120',
              primary: '#0F172A',
              light: '#334155',
            },
            accent: {
              DEFAULT: '#F97316',
              glow: '#fdba74',
            }
          },
          animation: {
            'float': 'float 6s ease-in-out infinite',
            'blob': 'blob 11s ease-in-out infinite',
            'spin-slow': 'spin 14s linear infinite',
            'elastic-pop': 'elasticPop .8s cubic-bezier(.34,1.56,.64,1) both',
            'slide-up-fade': 'slideUpFade .6s ease-out both',
            'sheen': 'sheen 1.2s ease-out both',
          },
          keyframes: {
            float: { '0%,100%': { transform: 'translateY(0)' }, '50%': { transform: 'translateY(-14px)' } },
            blob: {
              '0%': { transform: 'translate(0px, 0px) scale(1)' },
              '33%': { transform: 'translate(26px, -42px) scale(1.08)' },
              '66%': { transform: 'translate(-18px, 18px) scale(.92)' },
              '100%': { transform: 'translate(0px, 0px) scale(1)' },
            },
            elasticPop: {
              '0%': { opacity: '0', transform: 'scale(.6)' },
              '60%': { opacity: '1', transform: 'scale(1.08)' },
              '100%': { opacity: '1', transform: 'scale(1)' },
            },
            slideUpFade: {
              '0%': { opacity: '0', transform: 'translateY(18px)' },
              '100%': { opacity: '1', transform: 'translateY(0)' },
            },
            sheen: {
              '0%': { transform: 'translateX(-120%)' },
              '100%': { transform: 'translateX(120%)' }
            }
          }
        }
      }
    }
  </script>

  <style>
    /* ========= 2025 Design Tokens ========= */
    :root{
      color-scheme: light;
      --bg0: #f8fafc;
      --bg1: #ffffff;
      --fg0: #0f172a;
      --fg1: rgba(15, 23, 42, .68);

      --glass: rgba(255,255,255,.78);
      --glassBorder: rgba(255,255,255,.55);
      --glassShadow: 0 18px 60px rgba(2,6,23,.16);

      --ring: rgba(249,115,22,.35);
      --cardInner: rgba(2,6,23,.04);
    }

    html[data-theme="dark"]{
      color-scheme: dark;
      --bg0: #050814;
      --bg1: #0b1223;
      --fg0: #e5e7eb;
      --fg1: rgba(229, 231, 235, .70);

      --glass: rgba(15,23,42,.55);
      --glassBorder: rgba(148,163,184,.18);
      --glassShadow: 0 18px 70px rgba(0,0,0,.45);

      --ring: rgba(253,186,116,.30);
      --cardInner: rgba(255,255,255,.06);
    }

    body {
      font-family: "Plus Jakarta Sans", system-ui, -apple-system, Segoe UI, Roboto, sans-serif;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
    }
    body::-webkit-scrollbar { display: none; }

    /* ========= Soft Glassmorphism 2.0 ========= */
    .glass-card{
      background: var(--glass);
      backdrop-filter: blur(18px) saturate(130%);
      -webkit-backdrop-filter: blur(18px) saturate(130%);
      border: 1px solid var(--glassBorder);
      box-shadow: var(--glassShadow);
    }
    .glass-inset{
      background: linear-gradient(180deg, rgba(255,255,255,.12), rgba(255,255,255,0));
      border: 1px solid rgba(255,255,255,.10);
    }

    /* Slide states */
    .slide { will-change: transform, opacity; }
    .slide-enter { opacity: 0; transform: translateX(42px) scale(.97); pointer-events: none; }
    .slide-active { opacity: 1; transform: translateX(0) scale(1); pointer-events: auto; }
    .slide-exit { opacity: 0; transform: translateX(-42px) scale(.97); pointer-events: none; }

    /* Delay helpers */
    .ad-100 { animation-delay: 100ms; }
    .ad-300 { animation-delay: 300ms; }
    .ad-400 { animation-delay: 400ms; }
    .ad-700 { animation-delay: 700ms; }
    .ad-900 { animation-delay: 900ms; }
    .ad-2000 { animation-delay: 2000ms; }
    .ad-4000 { animation-delay: 4000ms; }

    /* Safe area for iOS bottom */
    .safe-b { padding-bottom: calc(3rem + env(safe-area-inset-bottom)); }

    /* Micro interaction */
    .tap {
      transition: transform .16s ease, box-shadow .16s ease, filter .16s ease;
      will-change: transform;
    }
    .tap:active { transform: scale(.992); }
    .focus-ring:focus { outline: none; }
    .focus-ring:focus-visible { box-shadow: 0 0 0 6px var(--ring); }

    /* Reduced motion */
    @media (prefers-reduced-motion: reduce){
      * { animation: none !important; transition: none !important; scroll-behavior: auto !important; }
    }
  </style>

  <script>
    // Theme bootstrap (apply before paint)
    (function(){
      const saved = localStorage.getItem('kte_theme');
      const prefersDark = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
      const theme = saved || (prefersDark ? 'dark' : 'light');
      document.documentElement.setAttribute('data-theme', theme);
    })();
  </script>
</head>

<body class="h-screen w-screen overflow-hidden relative selection:bg-orange-200">

  <!-- Background (Liquid + Soft) -->
  <div class="fixed inset-0 -z-10">
    <div class="absolute inset-0"
      style="
        background:
          radial-gradient(1200px 600px at 20% 10%, rgba(59,130,246,.16), transparent 55%),
          radial-gradient(900px 520px at 90% 20%, rgba(249,115,22,.14), transparent 55%),
          radial-gradient(900px 520px at 40% 95%, rgba(99,102,241,.14), transparent 55%),
          linear-gradient(180deg, var(--bg0), var(--bg1));
      ">
    </div>

    <!-- Ambient blobs (liquid feel) -->
    <div class="absolute inset-0 overflow-hidden pointer-events-none">
      <div class="absolute top-0 left-[-22%] w-[28rem] h-[28rem] rounded-full filter blur-3xl opacity-30 animate-blob"
           style="background: rgba(59,130,246,.55)"></div>
      <div class="absolute top-[-6%] right-[-22%] w-[28rem] h-[28rem] rounded-full filter blur-3xl opacity-25 animate-blob ad-2000"
           style="background: rgba(249,115,22,.55)"></div>
      <div class="absolute bottom-[-24%] left-[18%] w-[28rem] h-[28rem] rounded-full filter blur-3xl opacity-25 animate-blob ad-4000"
           style="background: rgba(99,102,241,.55)"></div>
    </div>

    <!-- Subtle grain -->
    <div class="absolute inset-0 opacity-[.06] pointer-events-none"
      style="background-image: url('data:image/svg+xml,%3Csvg xmlns=%22http://www.w3.org/2000/svg%22 width=%22120%22 height=%22120%22%3E%3Cfilter id=%22n%22%3E%3CfeTurbulence type=%22fractalNoise%22 baseFrequency=%220.9%22 numOctaves=%222%22 stitchTiles=%22stitch%22/%3E%3C/filter%3E%3Crect width=%22120%22 height=%22120%22 filter=%22url(%23n)%22 opacity=%220.35%22/%3E%3C/svg%3E');">
    </div>
  </div>

  <!-- SPLASH -->
  <section id="splash-screen" class="absolute inset-0 z-50 flex flex-col items-center justify-center transition-opacity duration-700"
    style="background: linear-gradient(180deg, #0B1120, #0F172A);">
    <div class="absolute inset-0 opacity-10" style="background-image: radial-gradient(#fff 1px, transparent 1px); background-size: 24px 24px;"></div>

    <div class="relative z-10 flex flex-col items-center">
      <div class="relative mb-8">
        <div class="absolute -inset-5 rounded-full blur-2xl animate-pulse" style="background: rgba(249,115,22,.22)"></div>

        <div class="relative bg-white w-24 h-24 rounded-3xl shadow-2xl flex items-center justify-center overflow-hidden p-2 opacity-0 animate-elastic-pop ad-100">
          <img src="./assets/img/logo.png"
               onerror="this.style.display='none'; this.nextElementSibling.style.display='block'"
               class="w-full h-full object-contain"
               alt="Logo KARTEJI" />
          <span class="material-symbols-rounded text-6xl text-brand-primary hidden absolute" aria-hidden="true">diversity_3</span>
        </div>
      </div>

      <div class="text-center space-y-2 overflow-hidden opacity-0 animate-slide-up-fade ad-400">
        <h1 class="text-4xl font-extrabold text-white tracking-tight">KARTEJI</h1>
        <p class="text-slate-300 text-sm tracking-widest uppercase font-semibold">Karang Taruna Digital</p>
      </div>
    </div>

    <div class="absolute bottom-20 w-52 h-1.5 bg-white/15 rounded-full overflow-hidden opacity-0 animate-slide-up-fade ad-700">
      <div id="loading-bar" class="h-full bg-gradient-to-r from-orange-500 to-yellow-400 w-0 transition-all duration-[1800ms] ease-out"></div>
    </div>
  </section>

  <!-- ONBOARDING -->
  <section id="onboarding-screen" class="absolute inset-0 z-40 hidden flex-col justify-between pt-10 pb-8 px-6 opacity-0 transition-opacity duration-500">
    <!-- topbar -->
    <div class="flex justify-between items-center">
      <div class="flex items-center gap-2">
        <div class="w-9 h-9 rounded-xl flex items-center justify-center text-white shadow-lg"
             style="background: linear-gradient(135deg, #0F172A, #1f2a44);">
          <span class="font-extrabold text-xs">KT</span>
        </div>
        <span class="font-extrabold tracking-tight" style="color: var(--fg0)">KARTEJI</span>
      </div>

      <div class="flex items-center gap-2">
        <!-- theme toggle -->
        <button id="btn-theme"
          class="tap focus-ring px-3 py-2 rounded-xl text-sm font-extrabold glass-card"
          aria-label="Ganti tema">
          <span class="material-symbols-rounded align-middle" aria-hidden="true" style="font-size:20px">dark_mode</span>
        </button>

        <button id="btn-skip" class="tap focus-ring text-sm font-bold px-3 py-2 rounded-xl glass-card"
          aria-label="Lewati onboarding">
          Lewati
        </button>
      </div>
    </div>

    <!-- slider -->
    <div id="slider-container" class="flex-1 relative flex items-center justify-center touch-pan-y select-none">
      <!-- slide 0 -->
      <div class="slide absolute w-full text-center transition-all duration-500 ease-out slide-active" data-index="0" aria-label="Slide 1">
        <div class="relative w-64 h-64 mx-auto mb-8">
          <div class="absolute inset-0 border-2 border-dashed rounded-full animate-spin-slow"
               style="border-color: rgba(148,163,184,.45)"></div>
          <div class="absolute inset-4 rounded-full flex items-center justify-center shadow-lg animate-float"
               style="background: linear-gradient(135deg, rgba(59,130,246,.22), rgba(99,102,241,.16)); box-shadow: 0 18px 60px rgba(59,130,246,.18);">
            <span class="material-symbols-rounded text-[5rem] drop-shadow-sm" aria-hidden="true" style="color: var(--fg0)">diversity_3</span>
          </div>
          <div class="absolute -right-2 top-10 p-2 rounded-xl shadow-lg animate-bounce ad-300"
               style="background: var(--glass); border:1px solid var(--glassBorder);">
            <span class="material-symbols-rounded text-orange-500 text-xl" aria-hidden="true">favorite</span>
          </div>
        </div>
        <h2 class="text-3xl font-extrabold mb-3 leading-tight" style="color: var(--fg0)">Satu Aplikasi,<br>Semua Urusan.</h2>
        <p class="px-4 leading-relaxed text-sm" style="color: var(--fg1)">Kelola organisasi dari HP: data anggota, agenda, surat, sampai pengumuman.</p>
      </div>

      <!-- slide 1 -->
      <div class="slide absolute w-full text-center transition-all duration-500 ease-out slide-enter" data-index="1" aria-label="Slide 2">
        <div class="relative w-64 h-64 mx-auto mb-8">
          <div class="absolute inset-4 rounded-full flex items-center justify-center shadow-lg animate-float"
               style="background: linear-gradient(135deg, rgba(249,115,22,.20), rgba(253,186,116,.12)); box-shadow: 0 18px 60px rgba(249,115,22,.16);">
            <span class="material-symbols-rounded text-[5rem] text-orange-500 drop-shadow-sm" aria-hidden="true">account_balance_wallet</span>
          </div>
          <div class="absolute left-0 bottom-10 px-3 py-1 rounded-full shadow-lg animate-pulse"
               style="background: var(--glass); border:1px solid var(--glassBorder);">
            <span class="text-xs font-extrabold text-emerald-600">+Rp 50.000</span>
          </div>
        </div>
        <h2 class="text-3xl font-extrabold mb-3 leading-tight" style="color: var(--fg0)">Kas Transparan<br>& Akuntabel.</h2>
        <p class="px-4 leading-relaxed text-sm" style="color: var(--fg1)">Pemasukan & pengeluaran tercatat rapi, lengkap bukti foto, dan laporan otomatis.</p>
      </div>

      <!-- slide 2 -->
      <div class="slide absolute w-full text-center transition-all duration-500 ease-out slide-enter" data-index="2" aria-label="Slide 3">
        <div class="relative w-64 h-64 mx-auto mb-8">
          <div class="absolute inset-4 rounded-full flex items-center justify-center shadow-lg animate-float"
               style="background: linear-gradient(135deg, rgba(16,185,129,.18), rgba(20,184,166,.12)); box-shadow: 0 18px 60px rgba(16,185,129,.12);">
            <span class="material-symbols-rounded text-[5rem] text-emerald-500 drop-shadow-sm" aria-hidden="true">location_on</span>
          </div>
          <div class="absolute right-4 bottom-16 text-white p-2 rounded-xl shadow-xl transform rotate-12"
               style="background: linear-gradient(135deg, #0F172A, #111c33);">
            <span class="material-symbols-rounded text-xl" aria-hidden="true">shuffle</span>
          </div>
        </div>
        <h2 class="text-3xl font-extrabold mb-3 leading-tight" style="color: var(--fg0)">Titik Kumpul<br>Otomatis.</h2>
        <p class="px-4 leading-relaxed text-sm" style="color: var(--fg1)">Undi lokasi rapat/arisan dengan adilâ€”anti ribet, anti drama.</p>
      </div>
    </div>

    <!-- bottom -->
    <div>
      <div class="flex justify-center gap-2 mb-8" aria-label="Indikator slide">
        <div class="dot w-8 h-2 rounded-full transition-all duration-300" style="background: var(--fg0)"></div>
        <div class="dot w-2 h-2 rounded-full transition-all duration-300" style="background: rgba(148,163,184,.55)"></div>
        <div class="dot w-2 h-2 rounded-full transition-all duration-300" style="background: rgba(148,163,184,.55)"></div>
      </div>

      <button id="btn-next"
        class="tap focus-ring w-full text-white font-extrabold py-4 rounded-2xl active:scale-[.99] transition-all flex items-center justify-center gap-3 relative overflow-hidden group"
        style="background: linear-gradient(135deg, #0F172A, #111c33); box-shadow: 0 18px 60px rgba(2,6,23,.18);">
        <span class="relative z-10">Lanjut</span>
        <span class="material-symbols-rounded relative z-10 group-hover:translate-x-1 transition-transform" aria-hidden="true">arrow_forward</span>

        <!-- sheen -->
        <span class="absolute inset-0 opacity-0 group-hover:opacity-100 transition-opacity">
          <span class="absolute -left-1/2 top-0 h-full w-1/2 bg-white/15 skew-x-[-18deg] animate-sheen"></span>
        </span>
      </button>
    </div>
  </section>

  <!-- AUTH SHEET -->
  <section id="auth-screen" class="absolute inset-0 z-30 hidden items-end justify-center opacity-0 transition-opacity duration-300">
    <div class="absolute inset-0 bg-black/35 backdrop-blur-sm"></div>
    <button id="auth-backdrop" class="absolute inset-0 cursor-default" aria-label="Tutup"></button>

    <div id="auth-card" class="glass-card w-full rounded-t-[2.5rem] p-8 safe-b translate-y-full transition-transform duration-400 ease-out">
      <div class="flex items-center justify-between mb-6">
        <div class="w-12 h-1.5 rounded-full" style="background: rgba(148,163,184,.55)"></div>
        <button id="btn-theme-2" class="tap focus-ring px-3 py-2 rounded-xl text-sm font-extrabold glass-inset"
          aria-label="Ganti tema">
          <span class="material-symbols-rounded align-middle" aria-hidden="true" style="font-size:20px">contrast</span>
        </button>
      </div>

      <div class="relative w-full h-40 rounded-2xl overflow-hidden mb-6 group shadow-inner"
           style="background: rgba(148,163,184,.18);">
        <video autoplay loop muted playsinline class="w-full h-full object-cover opacity-95">
          <source src="assets/video/kegiatan.mp4" type="video/mp4">
        </video>
        <img id="fallback-cover"
             src="https://images.unsplash.com/photo-1529156069898-49953e39b3ac?q=80&w=1200&auto=format&fit=crop"
             class="w-full h-full object-cover hidden"
             alt="Kegiatan Karang Taruna" />
        <div class="absolute inset-0 bg-gradient-to-t from-black/60 to-transparent"></div>
        <div class="absolute bottom-3 left-4 text-white">
          <p class="text-[10px] font-extrabold uppercase tracking-widest opacity-85">Selamat Datang</p>
          <p class="font-extrabold">Warga Karang Taruna</p>
        </div>
      </div>

      <div class="text-center mb-7">
        <h2 class="text-3xl font-extrabold mb-2" style="color: var(--fg0)">Mari Mulai!</h2>
        <p class="text-sm" style="color: var(--fg1)">Masuk untuk akses fitur organisasi.</p>
      </div>

      <div class="space-y-3">
        <a href="login.html"
           class="tap focus-ring w-full text-white font-extrabold py-4 rounded-2xl active:scale-[.99] transition-transform flex justify-center items-center gap-2"
           style="background: linear-gradient(135deg, #0F172A, #111c33); box-shadow: 0 18px 60px rgba(2,6,23,.18);">
          <span class="material-symbols-rounded" aria-hidden="true">login</span>
          Masuk Akun
        </a>

        <a href="register.html"
           class="tap focus-ring w-full font-extrabold py-4 rounded-2xl active:scale-[.99] transition-transform flex justify-center items-center gap-2 glass-inset"
           style="color: var(--fg0);">
          <span class="material-symbols-rounded text-orange-500" aria-hidden="true">person_add</span>
          Daftar Anggota Baru
        </a>
      </div>

      <div class="mt-6 flex items-center justify-center gap-2 text-[11px] font-semibold uppercase tracking-widest"
           style="color: rgba(148,163,184,.9)">
        <span>Versi 2.1.0</span><span>&bull;</span><span>Cilosari Barat</span>
      </div>

      <button id="btn-close-auth" class="tap focus-ring mt-5 w-full text-center text-sm font-extrabold py-3 rounded-xl glass-inset"
              style="color: var(--fg1)">
        Tutup
      </button>
    </div>
  </section>

  <script>
    // --------- Helpers ----------
    const $ = (id) => document.getElementById(id);

    const splash = $('splash-screen');
    const loading = $('loading-bar');
    const onboarding = $('onboarding-screen');
    const auth = $('auth-screen');
    const authCard = $('auth-card');

    const btnNext = $('btn-next');
    const btnSkip = $('btn-skip');
    const sliderContainer = $('slider-container');

    const dots = Array.from(document.querySelectorAll('.dot'));
    const slides = Array.from(document.querySelectorAll('.slide'));

    const authBackdrop = $('auth-backdrop');
    const btnCloseAuth = $('btn-close-auth');
    const fallbackCover = $('fallback-cover');

    const btnTheme = $('btn-theme');
    const btnTheme2 = $('btn-theme-2');

    let currentIndex = 0;
    let touchStartX = 0;
    let touchEndX = 0;
    let isTransitioning = false;

    // ---------- Theme ----------
    function getTheme(){
      return document.documentElement.getAttribute('data-theme') || 'light';
    }
    function setTheme(next){
      document.documentElement.setAttribute('data-theme', next);
      localStorage.setItem('kte_theme', next);

      // Update theme-color meta (nice for mobile browser chrome)
      const meta = document.querySelector('meta[name="theme-color"]');
      if(meta) meta.setAttribute('content', next === 'dark' ? '#0B1120' : '#F8FAFC');

      // Update icon in toggle
      const icon = (next === 'dark') ? 'light_mode' : 'dark_mode';
      if(btnTheme) btnTheme.querySelector('.material-symbols-rounded').textContent = icon;
    }
    function toggleTheme(){
      const next = getTheme() === 'dark' ? 'light' : 'dark';
      setTheme(next);
    }
    // init icon
    setTheme(getTheme());

    btnTheme?.addEventListener('click', toggleTheme);
    btnTheme2?.addEventListener('click', toggleTheme);

    // Video fallback
    (function setupVideoFallback(){
      const v = authCard?.querySelector('video');
      if(!v) return;
      v.addEventListener('error', () => {
        v.classList.add('hidden');
        fallbackCover.classList.remove('hidden');
      }, { once: true });
    })();

    // Splash -> Onboarding
    window.addEventListener('load', () => {
      setTimeout(() => { loading.style.width = '100%'; }, 350);

      setTimeout(() => {
        splash.style.opacity = '0';
        setTimeout(() => {
          splash.style.display = 'none';
          onboarding.style.display = 'flex';
          requestAnimationFrame(() => onboarding.classList.remove('opacity-0'));
        }, 650);
      }, 2200);
    });

    // ---------- Slide Logic ----------
    function setSlideClasses(nextIndex) {
      slides.forEach((s, i) => {
        if(i === nextIndex) s.className = "slide absolute w-full text-center transition-all duration-500 ease-out slide-active";
        else if(i < nextIndex) s.className = "slide absolute w-full text-center transition-all duration-500 ease-out slide-exit";
        else s.className = "slide absolute w-full text-center transition-all duration-500 ease-out slide-enter";
      });
    }

    function updateDots() {
      dots.forEach((dot, i) => {
        dot.className = (i === currentIndex)
          ? "dot w-8 h-2 rounded-full transition-all duration-300"
          : "dot w-2 h-2 rounded-full transition-all duration-300";

        dot.style.background = (i === currentIndex)
          ? "var(--fg0)"
          : "rgba(148,163,184,.55)";
      });
    }

    function updateButton() {
      if(currentIndex === slides.length - 1) {
        btnNext.innerHTML = `<span class="relative z-10">Mulai Sekarang</span>`;
        btnNext.style.background = "linear-gradient(135deg, #F97316, #FDBA74)";
      } else {
        btnNext.innerHTML = `
          <span class="relative z-10">Lanjut</span>
          <span class="material-symbols-rounded relative z-10 group-hover:translate-x-1 transition-transform" aria-hidden="true">arrow_forward</span>
          <span class="absolute inset-0 opacity-0 group-hover:opacity-100 transition-opacity">
            <span class="absolute -left-1/2 top-0 h-full w-1/2 bg-white/15 skew-x-[-18deg] animate-sheen"></span>
          </span>
        `;
        btnNext.style.background = "linear-gradient(135deg, #0F172A, #111c33)";
      }
    }

    function changeSlide(newIndex) {
      if(isTransitioning) return;
      if(newIndex < 0 || newIndex >= slides.length) return;

      isTransitioning = true;
      currentIndex = newIndex;

      setSlideClasses(currentIndex);
      updateDots();
      updateButton();

      setTimeout(() => { isTransitioning = false; }, 520);
    }

    btnNext.addEventListener('click', () => {
      if(currentIndex < slides.length - 1) changeSlide(currentIndex + 1);
      else showAuth();
    });

    btnSkip.addEventListener('click', showAuth);

    // Swipe
    sliderContainer.addEventListener('touchstart', (e) => {
      touchStartX = e.changedTouches[0].screenX;
    }, { passive: true });

    sliderContainer.addEventListener('touchend', (e) => {
      touchEndX = e.changedTouches[0].screenX;
      const threshold = 52;

      if(touchStartX - touchEndX > threshold) {
        if(currentIndex < slides.length - 1) changeSlide(currentIndex + 1);
        else showAuth();
      } else if(touchEndX - touchStartX > threshold) {
        if(currentIndex > 0) changeSlide(currentIndex - 1);
      }
    }, { passive: true });

    // Keyboard
    window.addEventListener('keydown', (e) => {
      if(onboarding.style.display === 'flex') {
        if(e.key === 'ArrowRight') changeSlide(currentIndex + 1);
        if(e.key === 'ArrowLeft') changeSlide(currentIndex - 1);
        if(e.key === 'Enter') {
          if(currentIndex < slides.length - 1) changeSlide(currentIndex + 1);
          else showAuth();
        }
      }
      if(e.key === 'Escape' && auth.style.display === 'flex') hideAuth();
    });

    // ---------- Auth Sheet ----------
    function showAuth() {
      onboarding.style.opacity = '0';
      setTimeout(() => {
        onboarding.style.display = 'none';
        auth.style.display = 'flex';
        requestAnimationFrame(() => {
          auth.classList.remove('opacity-0');
          authCard.classList.remove('translate-y-full');
        });
      }, 320);
    }

    function hideAuth() {
      authCard.classList.add('translate-y-full');
      auth.classList.add('opacity-0');
      setTimeout(() => {
        auth.style.display = 'none';
      }, 280);
    }

    authBackdrop.addEventListener('click', hideAuth);
    btnCloseAuth.addEventListener('click', hideAuth);

    // Init
    setSlideClasses(0);
    updateDots();
    updateButton();
  </script>
</body>
</html>
